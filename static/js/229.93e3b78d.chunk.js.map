{"version":3,"file":"static/js/229.93e3b78d.chunk.js","mappings":"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","sources":["Manage/pages/Banner/index.jsx","api/bannerAPI.js","../node_modules/@mui/icons-material/Backspace.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport BackspaceIcon from \"@mui/icons-material/Backspace\";\r\nimport bannerApi from \"../../../api/bannerAPI\";\r\nimport { useSelector } from \"react-redux\";\r\nfunction Index() {\r\n  const [listImage, setListImage] = useState([]);\r\n  const [imageUrl, setImageUrl] = useState([]);\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const [banner, setBanner] = useState([]);\r\n  const [valueBrand, setValueBrand] = useState();\r\n  const [valuePage, setValuePage] = useState();\r\n\r\n  const brand = useSelector((state) => state?.brand?.brandlist);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const res = await bannerApi.getBanner();\r\n\r\n      setBanner(res);\r\n    })();\r\n  }, []);\r\n  const getBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onload = () => {\r\n        resolve(fileReader.result);\r\n      };\r\n\r\n      fileReader.onerror = (err) => {\r\n        reject(err);\r\n      };\r\n    });\r\n  };\r\n\r\n  const submitBanner = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    if (listImage) {\r\n      for (let i = 0; i < listImage.length; i++) {\r\n        formData.append(\"photos\", listImage[i]);\r\n      }\r\n      formData.append(\"thuonghieu\",valueBrand)\r\n      formData.append(\"page\",valuePage)\r\n      await bannerApi.createBanner(formData);\r\n      const bannerAffter = await bannerApi.getBanner();\r\n      setBanner(bannerAffter);\r\n    }\r\n  };\r\n\r\n  const btnActive = () => {\r\n    document.getElementById(\"default-btn\").click();\r\n  };\r\n  const uploadImage = async (e) => {\r\n    setListImage(e.target.files);\r\n    const imageNumber = e.target.files.length + imageUrl.length;\r\n    if (imageNumber <= 5) {\r\n      let i = 0;\r\n      for (i; i < e.target.files.length; i++) {\r\n        const file = e.target.files[i];\r\n        if (!file) return;\r\n        const base64 = await getBase64(file);\r\n        setImageUrl((oldFile) => [...oldFile, { url: base64 }]);\r\n      }\r\n    } else {\r\n      enqueueSnackbar(\"Tối đa là 5 ảnh!\", {\r\n        variant: \"error\",\r\n        autoHideDuration: 2000,\r\n      });\r\n    }\r\n  };\r\n  const handleRemoveImage = (e) => {\r\n    const name = e.target.getAttribute(\"name\");\r\n    setImageUrl(imageUrl.filter((item) => item.url !== name));\r\n  };\r\n  const deleteBanner = async (id) => {\r\n    await bannerApi.deteleBanner(id);\r\n    const bannerAffter = await bannerApi.getBanner();\r\n    setBanner(bannerAffter);\r\n  };\r\n  const handleAddFormChange = (e) => {\r\n    e.preventDefault();\r\n    const fieldValue = e.target.value;\r\n    setValueBrand(fieldValue)\r\n    \r\n  };\r\n  const handleAddFormChangepage = (e) => {\r\n    e.preventDefault();\r\n    const fieldValue = e.target.value;\r\n    setValuePage(fieldValue)\r\n    \r\n  };\r\n  \r\n\r\n  const renderBaner =\r\n    !!banner &&\r\n    banner?.map(({ id_ab, ten_ab }, idx) => (\r\n      <div key={idx}>\r\n        <div className=\" relative text-center border  rounded-lg  shadow-lg \">\r\n          <img\r\n            className=\"rounded w-[250px] h-[100px]\"\r\n            src={ten_ab.slice(12, ten_ab.length)}\r\n            alt=\"san pham\"\r\n          />\r\n          <BackspaceIcon\r\n            sx={{\r\n              color: \"red\",\r\n            }}\r\n            onClick={() => deleteBanner(id_ab)}\r\n            className=\"absolute right-1 top-1 cursor-pointer z-10 \"\r\n          />\r\n        </div>\r\n      </div>\r\n    ));\r\n  const renderImage = imageUrl?.map((urlImage, idx) => {\r\n    return (\r\n      <div className=\"relative\" key={idx}>\r\n        <img\r\n          className=\"w-[100px] h-[100px] rounded-lg\"\r\n          src={urlImage.url}\r\n          alt=\"anh bia\"\r\n        />\r\n        <div\r\n          className=\"absolute -top-1 -right-1 bg-red-600 text-center text-[12px] text-white px-[6px] rounded-full cursor-pointer\"\r\n          name={urlImage.url}\r\n          onClick={handleRemoveImage}\r\n        >\r\n          x\r\n        </div>\r\n      </div>\r\n    );\r\n  });\r\n  return (\r\n    <div>\r\n      <div className=\"px-[20px]\">\r\n        <div>\r\n          <div className=\"flex gap-6\">\r\n            <button\r\n              className=\"px-4 py-2 bg-green-600 text-white rounded-lg shadow-lg\"\r\n              onClick={submitBanner}\r\n            >\r\n              Thêm Ảnh Bìa\r\n            </button>\r\n            <div className=\"\">\r\n              <span className=\"block\">Thương hiệu</span>\r\n              <select\r\n                className=\"p-1 w-[200px] border border-slate-400 rounded-lg\"\r\n                name=\"thuonghieu\"\r\n                onChange={handleAddFormChange}\r\n              >\r\n                 <option value=\"\">Trống</option>\r\n                {brand &&\r\n                  brand?.map(({ id_th, ten_th }, idx) => (\r\n                    <option key={idx} value={id_th}>\r\n                      {ten_th}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"\">\r\n              <span className=\"block\">Hướng trang</span>\r\n              <select\r\n                className=\"p-1 w-[200px] border border-slate-400 rounded-lg\"\r\n                name=\"thuonghieu\"\r\n                onChange={handleAddFormChangepage}\r\n              >\r\n                <option value=\"\">Trống</option>\r\n                <option value=\"/shop/products\">Sản phẩm</option>\r\n                <option value=\"/shop/sale\">Giảm giá</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-4 mt-3\">\r\n          <div className=\"flex gap-4\">\r\n            <input\r\n              type=\"file\"\r\n              id=\"default-btn\"\r\n              className=\"hidden\"\r\n              name=\"file\"\r\n              onChange={(e) => {\r\n                uploadImage(e);\r\n              }}\r\n              multiple\r\n            />\r\n            <div\r\n              className=\"w-[100px] h-[100px] border border-slate-400 rounded-lg cursor-pointer\"\r\n              onClick={() => btnActive()}\r\n            >\r\n              <div className=\"text-[25px] text-[#ccc] text-center leading-[90px] \">\r\n                +\r\n              </div>\r\n            </div>\r\n            {renderImage}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"grid grid-cols-6 gap-5 mt-5\">{renderBaner}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Index;\r\n","import axiosClient from \"./axiosClient\";\r\n\r\nconst bannerApi = {\r\n  createBanner(data) {\r\n    const API_URL = \"/api/manage/banner/upload\";\r\n    return axiosClient.post(API_URL, data);\r\n  },\r\n  getBanner() {\r\n    const API_URL = \"/api/manage/banner\";\r\n    return axiosClient.get(API_URL);\r\n  },\r\n  deteleBanner(id) {\r\n    const API_URL = `/api/manage/banner/delete=${id}`;\r\n    return axiosClient.delete(API_URL);\r\n  },\r\n};\r\n\r\nexport default bannerApi;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z\"\n}), 'Backspace');\nexports.default = _default;"],"names":["useState","listImage","setListImage","imageUrl","setImageUrl","enqueueSnackbar","useSnackbar","banner","setBanner","valueBrand","setValueBrand","valuePage","setValuePage","brand","useSelector","state","brandlist","useEffect","bannerApi","res","getBase64","file","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","err","submitBanner","e","preventDefault","formData","FormData","i","length","append","bannerAffter","uploadImage","target","files","base64","oldFile","url","variant","autoHideDuration","handleRemoveImage","name","getAttribute","filter","item","deleteBanner","id","renderBaner","map","idx","id_ab","ten_ab","className","src","slice","alt","sx","color","onClick","renderImage","urlImage","onChange","fieldValue","value","id_th","ten_th","type","multiple","document","getElementById","click","createBanner","data","axiosClient","getBanner","deteleBanner","API_URL","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}