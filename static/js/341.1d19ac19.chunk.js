"use strict";(self.webpackChunkviews=self.webpackChunkviews||[]).push([[341],{56197:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(74165),a=n(15861),i=n(72791),s=n(57689),o=n(1413),c=n(70885),l=n(72849),d=n(72426),u=n.n(d),p=n(26241),h=n(81724),m=n(44695),x=n(99444),v=n(55112),f=n(27962),g=n(4565),b=n(52791),j=n(45953),Z=n(83798),w=n(90123),_=n(45050),N=n(35777),k=n(12442),y=n(63048),S=n(9672),D=n(65608),I={createDiscount:function(e){return D.Z.post("/api/manage/discount/add",e)},getDiscount:function(e){var t="/api/manage/discount/id=".concat(e);return D.Z.get(t)},getList:function(){return D.Z.get("/api/manage/discount/list")},deleteDiscount:function(e){var t="/api/manage/discount/delete=".concat(e);return D.Z.delete(t)}},P=n(38033),C=n(61134),T=n(80184),H={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"#fff",p:2},A={priceDiscount:"",EndDate:new Date},L=h.Ry().shape({priceDiscount:h.Z_().required("Vui l\xf2ng nh\u1eadp gi\xe1 khuy\u1ebfn m\xe3i")});var V=function(){var e,t,n,d,h,D,V,F,z,B,M=(0,C.cI)({resolver:(0,m.X)(L),defaultValues:A}),E=M.register,G=M.handleSubmit,K=M.formState,R=K.errors,U=K.isSubmitSuccessful,X=M.reset,Y=(0,i.useState)(""),q=(0,c.Z)(Y,2),O=q[0],W=q[1],$=(0,i.useState)(!1),J=(0,c.Z)($,2),Q=J[0],ee=J[1],te=(0,i.useState)(!1),ne=(0,c.Z)(te,2),re=ne[0],ae=ne[1],ie=(0,i.useState)(""),se=(0,c.Z)(ie,2),oe=se[0],ce=se[1],le=(0,i.useState)(""),de=(0,c.Z)(le,2),ue=de[0],pe=de[1],he=(0,i.useState)(""),me=(0,c.Z)(he,2),xe=(me[0],me[1]),ve=(0,i.useState)(""),fe=(0,c.Z)(ve,2),ge=(fe[0],fe[1]),be=(0,i.useState)(""),je=(0,c.Z)(be,2),Ze=je[0],we=je[1],_e=(0,i.useState)(""),Ne=(0,c.Z)(_e,2),ke=Ne[0],ye=Ne[1],Se=(0,i.useState)([]),De=(0,c.Z)(Se,2),Ie=De[0],Pe=De[1],Ce=(0,i.useState)(0),Te=(0,c.Z)(Ce,2),He=Te[0],Ae=Te[1],Le=(0,i.useState)([]),Ve=(0,c.Z)(Le,2),Fe=Ve[0],ze=Ve[1],Be=(0,p.Ds)().enqueueSnackbar,Me=(0,i.useState)([]),Ee=(0,c.Z)(Me,2),Ge=Ee[0],Ke=Ee[1],Re=function(){return ae(!1)},Ue=(0,s.s0)();(0,i.useEffect)((function(){(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U&&X(A),e.prev=1,e.next=4,S.Z.getProductListManage();case 4:t=e.sent,Ke(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Be(e.t0.message,{variant:"error",autoHideDuration:2e3});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[He]);var Xe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.deleteProduct(t);case 3:return e.next=5,Z.Z.deleteImportInvoice(n);case 5:Be("X\xf3a s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:2e3}),Ae((function(e){return e+1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Be(e.t0.message,{variant:"error",autoHideDuration:2e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i,s,o,c,l,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.Z.getList(t);case 2:return n=e.sent,e.next=5,S.Z.getProduct(t);case 5:return a=e.sent,e.next=8,w.Z.getColor(a[0].id_ms);case 8:return i=e.sent,e.next=11,k.Z.getTypeProduct(a[0].id_lsp);case 11:return s=e.sent,e.next=14,N.Z.getBrand(a[0].id_th);case 14:return o=e.sent,e.next=17,_.Z.getSize(a[0].id_kt);case 17:return c=e.sent,e.next=20,y.Z.getImage(a[0].id_sp);case 20:return l=e.sent,e.next=23,I.getDiscount(t);case 23:d=e.sent,Pe(n),ze(d),we(l),ye(s),pe(o),ge(c),xe(i),ce(a),ee(!0);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ae(!0),e.next=4,I.getDiscount(t);case 4:n=e.sent,ze(n),W(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Be(e.t0.message,{variant:"error",autoHideDuration:2e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.deleteDiscount(t);case 3:Re(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Be(e.t0.message,{variant:"error",autoHideDuration:2e3});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),We=[{field:"id_sp",headerName:"ID",width:80,headerAlign:"center",align:"center"},{field:"ten_sp",headerName:"T\xean S\u1ea3n Ph\u1ea9m",headerAlign:"center",width:300},{field:"gia_ban",headerName:"Gi\xe1 B\xe1n",width:120,headerAlign:"center",align:"center"},{field:"hanh_dong",headerName:"H\xe0nh \u0110\u1ed9ng",headerAlign:"center",width:400,renderCell:function(e){return(0,T.jsxs)("div",{className:"flex justify-between w-full",children:[(0,T.jsx)("div",{children:(0,T.jsx)("button",{onClick:function(){return Ye(e.row.id_sp)},className:"py-2 px-4 text-white font-bold bg-[#00CED1] rounded-lg shadow-lg",children:"Xem"})}),(0,T.jsx)("div",{children:(0,T.jsx)("button",{onClick:function(){return t=e.row.id_sp,void Ue("/manage/product/edit/".concat(t),{replace:!0});var t},className:"py-2 px-4 text-white font-bold bg-[#008000] rounded-lg shadow-lg",children:"S\u1eeda"})}),(0,T.jsx)("div",{children:(0,T.jsx)("button",{onClick:function(){return Xe(e.row.id_sp,e.row.id_hdn)},className:"py-2 px-4 text-white font-bold bg-[#FF0000] rounded-lg shadow-lg",children:"X\xf3a"})}),(0,T.jsx)("div",{children:(0,T.jsx)("button",{onClick:function(){return qe(e.row.id_sp)},className:"py-2 px-4 text-white font-bold bg-[#FF4500] rounded-lg shadow-lg",children:"Khuy\u1ebfn m\xe3i"})})]})}}],$e=null===Ge||void 0===Ge?void 0:Ge.map((function(e,t){var n=e.id_sp,r=(e.id_hdn,e.id_th),a=e.id_ms,i=e.id_kt,s=e.id_lsp,o=e.ten_sp,c=(e.gia_nhap_sp,e.gia_ban_sp),l=(e.so_luong_hdn,e.ngay_lap_hdx);return{id:t,id_sp:n,id_th:r,id_ms:a,id_kt:i,id_lsp:s,ten_sp:o,gia_ban:"".concat(new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(c)),ngay_nhap:u()(l).format("DD-MM-YYYY")}})),Je=Ze&&(null===Ze||void 0===Ze?void 0:Ze.map((function(e,t){var n=e.hinh_anh_sp;return(0,T.jsx)("div",{children:(0,T.jsx)("img",{className:"w-[100px] h-[100px] rounded-lg",src:n.slice(12,n.length),alt:"hinh anh san pham"})},t)}))),Qe=function(e){return{giakm:e.priceDiscount,idsp:O,hankhuyenmai:e.endDate}},et=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.createDiscount(Qe(t));case 3:Ae((function(e){return e+1})),Re(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Be(e.t0.message,{variant:"error",autoHideDuration:2e3});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"px-[20px]",children:(0,T.jsx)("div",{className:"border border-slate-300",children:(0,T.jsx)("div",{style:{height:"80vh",width:"100%"},children:(0,T.jsx)(l._,{rows:$e,columns:We,pageSize:8,rowsPerPageOptions:[8],rowHeight:60})})})}),oe&&(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(x.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:Q,onClose:function(){return ee(!1)},closeAfterTransition:!0,BackdropComponent:v.Z,BackdropProps:{timeout:300},children:(0,T.jsx)(f.Z,{in:Q,children:(0,T.jsxs)(b.Z,{sx:(0,o.Z)((0,o.Z)({},H),{},{borderRadius:"16px"}),children:[(0,T.jsxs)(g.Z,{id:"transition-modal-title",variant:"h6",component:"h2",children:[null===(e=oe[0])||void 0===e?void 0:e.id_sp," - ",null===(t=oe[0])||void 0===t?void 0:t.ten_sp]}),(0,T.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,T.jsxs)(j.ZP,{item:!0,xs:6,children:[(0,T.jsxs)(g.Z,{id:"transition-modal-description",sx:{mt:1},children:["Gi\xe1 b\xe1n:"," ",null===(n=oe[0])||void 0===n?void 0:n.gia_ban_sp.toLocaleString("it-IT",{style:"currency",currency:"VND"})]}),(0,T.jsxs)(g.Z,{sx:{mt:1},children:["Lo\u1ea1i s\u1ea3n ph\u1ea9m: ",null===(d=ke[0])||void 0===d?void 0:d.ten_lsp]}),(0,T.jsxs)(g.Z,{sx:{mt:1},children:["K\xedch th\u01b0\u1edbc:"," ",null===Ie||void 0===Ie?void 0:Ie.map((function(e,t){var n=e.ten_kt;return(0,T.jsxs)("span",{children:[n,","]},t)}))]}),(0,T.jsxs)(g.Z,{sx:{mt:1},children:["M\xe0u s\u1eafc:"," ",null===Ie||void 0===Ie?void 0:Ie.map((function(e,t){var n=e.ten_ms;return(0,T.jsxs)("span",{children:[n,","]},t)}))]}),(0,T.jsxs)(g.Z,{sx:{mt:1},children:["Th\u01b0\u01a1ng hi\u1ec7u: ",null===(h=ue[0])||void 0===h?void 0:h.ten_th]}),(0,T.jsxs)(g.Z,{sx:{mt:1},children:["Gi\u1ea3m gi\xe1: ",null===(D=Fe[0])||void 0===D?void 0:D.gia_km," %"]})]}),(0,T.jsx)(j.ZP,{item:!0,xs:6,children:(0,T.jsxs)(g.Z,{sx:{mt:1},children:["Th\xf4ng tin s\u1ea3n ph\u1ea9m: ",(0,T.jsx)("br",{})," ",null===(V=oe[0])||void 0===V?void 0:V.thong_tin_sp]})})]}),(0,T.jsx)(b.Z,{sx:{display:"grid",mt:2,gap:1,gridTemplateColumns:"repeat(6, 1fr)"},children:Je})]})})})}),(0,T.jsx)(x.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:re,onClose:Re,closeAfterTransition:!0,BackdropComponent:v.Z,BackdropProps:{timeout:300},children:(0,T.jsx)(f.Z,{in:re,children:(0,T.jsx)(b.Z,{sx:(0,o.Z)((0,o.Z)({},H),{},{borderRadius:"16px"}),children:0===(null===Fe||void 0===Fe?void 0:Fe.length)?(0,T.jsxs)("form",{onSubmit:G((function(e){return et(e)})),children:[(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{children:"Gi\xe1 khuy\u1ebfn m\xe3i (%)"}),(0,T.jsx)("input",(0,o.Z)({className:"mt-2 px-2 py-2 w-full border border-slate-400 rounded-lg",type:"text",name:"priceDiscount"},E("priceDiscount"))),(0,T.jsx)("p",{className:"absolute text-[14px] text-red-600",children:null===(F=R.priceDiscount)||void 0===F?void 0:F.message})]}),(0,T.jsx)("div",{className:"flex justify-between",children:(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{children:"Ng\xe0y k\u1ebft th\xfac"}),(0,T.jsx)("input",(0,o.Z)({className:"mt-2 px-2 py-2 w-full border border-slate-400 rounded-lg",type:"datetime-local",name:"endDate"},E("endDate"))),(0,T.jsx)("p",{className:"absolute text-[14px] text-red-600",children:null===(z=R.endDate)||void 0===z?void 0:z.message})]})}),(0,T.jsx)("div",{className:"mt-8",children:(0,T.jsx)("button",{type:"submit",className:"float-right font-bold text-white py-2 px-4 bg-slate-500 rounded-lg",children:"X\xe1c nh\u1eadn"})})]}):(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)("div",{className:"p-4",children:[(0,T.jsxs)("h4",{className:"text-[20px]",children:["Gi\xe1 khuy\u1ebfn m\xe3i: ",(0,T.jsxs)("span",{children:[null===(B=Fe[0])||void 0===B?void 0:B.gia_km," %"]})]}),(0,T.jsx)("button",{onClick:function(){var e;return Oe(null===(e=Fe[0])||void 0===e?void 0:e.id_km)},className:"bg-red-600 py-1 px-2 mt-2 rounded-lg text-white",children:"X\xf3a"})]})})})})})]})},F=n(42982),z=n(16030),B={createCSV:function(e){return D.Z.post("/api/csv/add",e)},createdetailCSV:function(e){return D.Z.post("/api/csv/adddetail",e)},createImageCSV:function(e){return D.Z.post("/api/csv/image",e)}},M=(n(4245),{kichthuoc:"KT05",loaisanpham:"LSP01",tensanpham:"Nike Shoes",thongtinsanpham:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m \u0111ang \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt",thuonghieu:"TH01",giaban:"1500000"});var E=function(){var e=(0,C.cI)({defaultValues:M}),t=e.register,n=e.handleSubmit,s=e.formState,l=e.reset,d=(0,i.useState)([]),u=(0,c.Z)(d,2),h=u[0],m=u[1],x=(0,i.useState)([]),v=(0,c.Z)(x,2),f=v[0],g=v[1],b=(0,i.useState)({}),j=(0,c.Z)(b,2),Z=j[0],w=j[1],_=(0,i.useState)([]),N=(0,c.Z)(_,2),k=N[0],D=N[1],I=(0,i.useState)({kichthuoc:"",mausac:""}),H=(0,c.Z)(I,2),A=H[0],L=H[1],V=(0,i.useState)(),E=(0,c.Z)(V,2),G=E[0],K=E[1],R=(0,p.Ds)().enqueueSnackbar,U=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.color)||void 0===t?void 0:t.colorlist})),X=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.size)||void 0===t?void 0:t.sizelist})),Y=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brandlist})),q=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.typeProduct)||void 0===t?void 0:t.typeProductlist})),O=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){t(r.result)},r.onerror=function(e){n(e)}}))},W=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(t.target.files),!(t.target.files.length+h.length<=5)){e.next=16;break}n=0,a=(0,r.Z)().mark((function e(){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[n]){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return e.next=5,O(a);case 5:i=e.sent,m((function(e){return[].concat((0,F.Z)(e),[{url:i}])}));case 7:case"end":return e.stop()}}),e)}));case 6:if(!(n<t.target.files.length)){e.next=14;break}return e.delegateYield(a(),"t0",8);case 8:if("object"!==typeof(i=e.t0)){e.next=11;break}return e.abrupt("return",i.v);case 11:n++,e.next=6;break;case 14:e.next=17;break;case 16:R("Image is max 5",{variant:"error",autoHideDuration:2e3});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){s.isSubmitSuccessful&&(l(M),D([]),g([]))}),[s,Z,l]);var $=function(e){return{tensanpham:e.tensanpham,giaban:e.giaban,loaisanpham:e.loaisanpham,thuonghieu:e.thuonghieu,thongtinsanpham:e.thongtinsanpham}},J=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i,s,o,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(t),e.prev=1,e.next=4,S.Z.createProduct($(t));case 4:if(n=e.sent,!k){e.next=13;break}a=0;case 7:if(!(a<k.length)){e.next=13;break}return e.next=10,P.Z.createdetailProductAPI({idsp:n[0].id_sp,idkt:null===(i=k[a])||void 0===i?void 0:i.kichthuoc,idms:null===(s=k[a])||void 0===s?void 0:s.mausac});case 10:a++,e.next=7;break;case 13:if(o=new FormData,!f){e.next=22;break}for(console.log("1"),l=0;l<f.length;l++)o.append("photos",f[l]);return console.log("2"),o.append("idsp",null===(c=n[0])||void 0===c?void 0:c.id_sp),e.next=21,y.Z.createImage(o);case 21:console.log("3");case 22:R("Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:2e3}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t=e.target.getAttribute("name");m(h.filter((function(e){return e.url!==t})))},ee=null===h||void 0===h?void 0:h.map((function(e,t){return(0,T.jsxs)("div",{className:"relative",children:[(0,T.jsx)("img",{className:"w-[100px] h-[100px] rounded-lg",src:e.url,alt:"anhsanpham"}),(0,T.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-600 text-center text-[12px] text-white px-[6px] rounded-full cursor-pointer",name:e.url,onClick:Q,children:"x"})]},t)})),te=function(e){e.preventDefault();var t=e.target.getAttribute("name"),n=e.target.value,r=(0,o.Z)({},A);r[t]=n,L(r)},ne=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("file",G),e.next=5,B.createCSV(n);case 5:return e.sent,e.next=8,B.createdetailCSV(n);case 8:return e.sent,e.next=11,B.createImageCSV(n);case 11:200===e.sent.status?R("Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:2e3}):R("Th\xeam s\u1ea3n ph\u1ea9m th\u1ea5t b\u1ea1i",{variant:"error",autoHideDuration:2e3});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("button",{form:"addProduct",className:"ml-7 px-10 py-2 mb-5 text-white bg-sky-400 rounded shadow-lg",children:"Th\xeam"}),(0,T.jsx)("button",{className:"ml-7 mr-7 px-10 py-2 mb-5 text-white bg-sky-400 rounded shadow-lg",onClick:function(e){ne(e)},children:"Th\xeam CSV"}),(0,T.jsx)("input",{name:"file",type:"file",id:"csvFileInput",accept:".csv",onChange:function(e){K(e.target.files[0])}})]}),(0,T.jsx)("form",{id:"addProduct",onSubmit:n((function(e){return J(e)})),children:(0,T.jsxs)("div",{className:"px-7",children:[(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{children:"T\xean s\u1ea3n ph\u1ea9m "}),(0,T.jsx)("input",(0,o.Z)({className:"px-2 py-1 w-full border border-slate-400 rounded-lg",type:"text",name:"tensanpham"},t("tensanpham")))]}),(0,T.jsxs)("div",{className:"mt-6",children:[(0,T.jsx)("span",{children:"H\xecnh \u1ea3nh"}),(0,T.jsx)("div",{className:"flex gap-4",children:(0,T.jsxs)("div",{className:"flex gap-4",children:[(0,T.jsx)("input",{type:"file",id:"default-btn",className:"hidden",name:"file",onChange:function(e){W(e)},multiple:!0}),(0,T.jsx)("div",{className:"w-[100px] h-[100px] border border-slate-400 rounded-lg cursor-pointer",onClick:function(){document.getElementById("default-btn").click()},children:(0,T.jsx)("div",{className:"text-[25px] text-[#ccc] text-center leading-[90px] ",children:"+"})}),ee]})})]}),(0,T.jsxs)("div",{className:"flex gap-5",children:[(0,T.jsxs)("div",{className:"w-[30%]",children:[(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{className:"block",children:"Lo\u1ea1i s\u1ea3n ph\u1ea9m"}),(0,T.jsx)("select",(0,o.Z)((0,o.Z)({className:"p-1 w-[200px] border border-slate-400 rounded-lg",name:"loaisanpham"},t("loaisanpham")),{},{children:q&&(null===q||void 0===q?void 0:q.map((function(e,t){var n=e.id_lsp,r=e.ten_lsp;return(0,T.jsx)("option",{value:n,children:r},t)})))}))]}),(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{className:"block",children:"Th\u01b0\u01a1ng hi\u1ec7u"}),(0,T.jsx)("select",(0,o.Z)((0,o.Z)({className:"p-1 w-[200px] border border-slate-400 rounded-lg",name:"thuonghieu"},t("thuonghieu")),{},{children:Y&&(null===Y||void 0===Y?void 0:Y.map((function(e,t){var n=e.id_th,r=e.ten_th;return(0,T.jsx)("option",{value:n,children:r},t)})))}))]}),(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{className:"block",children:"Gi\xe1 b\xe1n"}),(0,T.jsx)("input",(0,o.Z)((0,o.Z)({name:"giaban"},t("giaban")),{},{className:"p-1 w-[200px] border border-slate-400 rounded-lg"}))]})]}),(0,T.jsxs)("div",{className:"w-[70%] mt-5",children:[(0,T.jsx)("span",{children:"Th\xf4ng tin s\u1ea3n ph\u1ea9m"})," ",(0,T.jsx)("br",{}),(0,T.jsx)("textarea",(0,o.Z)({className:"w-full p-2 border border-slate-400 rounded-lg",name:"thongtinsanpham",id:"",rows:"10"},t("thongtinsanpham")))]})]})]})}),(0,T.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={mausac:A.mausac,kichthuoc:A.kichthuoc},n=[].concat((0,F.Z)(k),[t]);D(n)},children:(0,T.jsxs)("div",{className:"flex justify-between gap-5 w-[50%] mt-6 px-7",children:[(0,T.jsx)("div",{className:"w-full",children:(0,T.jsxs)("select",{name:"mausac",onChange:te,className:"h-8 px-2 w-full border border-slate-400 outline-none rounded-lg",children:[(0,T.jsx)("option",{value:"",children:"M\xe0u s\u1eafc"}),U&&(null===U||void 0===U?void 0:U.map((function(e,t){var n=e.id_ms,r=e.ten_ms;return(0,T.jsx)("option",{value:n,children:r},t)})))]})}),(0,T.jsx)("div",{className:"w-full",children:(0,T.jsxs)("select",{name:"kichthuoc",onChange:te,className:"h-8 px-2 w-full border border-slate-400 outline-none rounded-lg",children:[(0,T.jsx)("option",{value:"",children:"K\xedch th\u01b0\u1edbc"}),X&&(null===X||void 0===X?void 0:X.map((function(e,t){var n=e.id_kt,r=e.ten_kt;return(0,T.jsx)("option",{value:n,children:r},t)})))]})}),(0,T.jsx)("button",{className:"px-4 bg-slate-400 text-white rounded-lg",children:"Th\xeam"})]})}),(0,T.jsx)("div",{className:"mt-4 mb-10 px-7",children:(0,T.jsxs)("table",{className:"w-[40%]",children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"w-[20%] h-8 border border-slate-400",children:"M\xe0u S\u1eafc"}),(0,T.jsx)("th",{className:"w-[20%] h-8 border border-slate-400",children:"K\xedch Th\u01b0\u1edbc"}),(0,T.jsx)("th",{className:"w-[20%] h-8 border border-slate-400",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,T.jsx)("tbody",{children:null===k||void 0===k?void 0:k.map((function(e,t){var n=e.mausac,r=e.kichthuoc;return(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"text-center border border-slate-400",children:U.filter((function(e){return e.id_ms===n}))[0].ten_ms}),(0,T.jsx)("td",{className:"text-center border border-slate-400",children:X.filter((function(e){return e.id_kt===r}))[0].ten_kt}),(0,T.jsx)("td",{className:"w-[20%] text-center border border-slate-400 cursor-pointer hover:bg-zinc-500",onClick:function(){return e=t,void D(k.filter((function(t,n){return n!==e})));var e},children:"x"})]},t)}))})]})})]})},G=n(11087),K={giaban:"",kichthuoc:"",loaisanpham:"",mausac:"",tensanpham:"",thongtinsanpham:"",thuonghieu:"",soluong:"",gianhap:""};var R=function(){var e,t=(0,C.cI)((0,o.Z)({},K)),n=t.register,l=t.handleSubmit,d=t.reset,u=(0,i.useState)(""),h=(0,c.Z)(u,2),m=h[0],x=h[1],v=(0,i.useState)([]),f=(0,c.Z)(v,2),g=f[0],b=f[1],j=(0,i.useState)([]),Z=(0,c.Z)(j,2),w=Z[0],_=Z[1],N=(0,i.useState)([]),k=(0,c.Z)(N,2),D=k[0],I=k[1],H=(0,i.useState)([]),A=(0,c.Z)(H,2),L=A[0],V=A[1],B=(0,i.useState)({idsp:"",id_ms:"",id_kt:"",so_luong_sp:""}),M=(0,c.Z)(B,2),E=M[0],R=M[1],U=(0,i.useState)(0),X=(0,c.Z)(U,2),Y=X[0],q=X[1],O=(0,p.Ds)().enqueueSnackbar,W=(0,s.UO)(),$=(0,s.s0)(),J=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.color)||void 0===t?void 0:t.colorlist})),Q=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.size)||void 0===t?void 0:t.sizelist})),ee=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brandlist})),te=(0,z.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.typeProduct)||void 0===t?void 0:t.typeProductlist})),ne=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){t(r.result)},r.onerror=function(e){n(e)}}))},re=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files.length+(null===g||void 0===g?void 0:g.length)+(null===w||void 0===w?void 0:w.length)<=5)){e.next=15;break}n=(0,r.Z)().mark((function e(n){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[n]){e.next=3;break}return e.abrupt("return",{v:void 0});case 3:return e.next=5,ne(a);case 5:i=e.sent,b((function(e){return[].concat((0,F.Z)(e),[{url:i}])}));case 7:case"end":return e.stop()}}),e)})),a=0;case 4:if(!(a<t.target.files.length)){e.next=12;break}return e.delegateYield(n(a),"t0",6);case 6:if("object"!==typeof(i=e.t0)){e.next=9;break}return e.abrupt("return",i.v);case 9:a++,e.next=4;break;case 12:I(t.target.files),e.next=17;break;case 15:console.log("Image is max 5"),O("Image is max 5",{variant:"error",autoHideDuration:2e3});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,i,s,o,c,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.Z.getProduct(W.idsp);case 3:return c=e.sent,e.next=6,S.Z.getDetailProduct(W.idsp);case 6:return l=e.sent,e.next=9,y.Z.getImage(W.idsp);case 9:u=e.sent,_(u),V(l),d({tensanpham:c[0].ten_sp,thongtinsanpham:c[0].thong_tin_sp,giaban:null===(t=c[0])||void 0===t?void 0:t.gia_ban_sp,gianhap:null===(n=c[0])||void 0===n?void 0:n.gia_nhap_sp,kichthuoc:null===(a=c[0])||void 0===a?void 0:a.id_kt,loaisanpham:null===(i=c[0])||void 0===i?void 0:i.id_lsp,mausac:null===(s=c[0])||void 0===s?void 0:s.id_ms,thuonghieu:null===(o=c[0])||void 0===o?void 0:o.id_th}),x(c),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),O(e.t0.message,{variant:"error",autoHideDuration:2e3});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()}),[d,Y]);var ae=function(e){return{giaban:e.giaban,kichthuoc:e.kichthuoc,loaisanpham:e.loaisanpham,mausac:e.mausac,tensanpham:e.tensanpham,thongtinsanpham:e.thongtinsanpham,thuonghieu:e.thuonghieu}},ie=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i,s,o,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,e.prev=1,e.next=4,S.Z.updateProduct(W.idsp,ae(t));case 4:return e.next=6,P.Z.removeUpdate(W.idsp);case 6:if(!L){e.next=15;break}console.log(L),a=0;case 9:if(!(a<L.length)){e.next=15;break}return e.next=12,P.Z.updateDetailproduct({idsp:null===(i=L[a])||void 0===i?void 0:i.id_sp,idkt:null===(s=L[a])||void 0===s?void 0:s.id_kt,idms:null===(o=L[a])||void 0===o?void 0:o.id_ms,soluong:null===(c=L[a])||void 0===c?void 0:c.so_luong_sp});case 12:a++,e.next=9;break;case 15:for(O("S\u1eeda s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng",{variant:"success",autoHideDuration:2e3}),$("/manage/product/listproducts",{replace:!0}),l=0;l<(null===D||void 0===D?void 0:D.length);l++)n.append("photos",D[l]);return n.append("idsp",W.idsp),e.next=21,y.Z.createImage(n);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),O(e.t0.message,{variant:"error",autoHideDuration:2e3});case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t){return e.apply(this,arguments)}}(),se=function(e){var t=e.target.getAttribute("name");b(g.filter((function(e){return e.url!==t})))},oe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.Z.deleteImage(t);case 3:q((function(e){return e+1})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),O(e.t0.message,{variant:"error",autoHideDuration:2e3});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ce=null===g||void 0===g?void 0:g.map((function(e,t){return(0,T.jsxs)("div",{className:"relative",children:[(0,T.jsx)("img",{className:"w-[100px] h-[100px] rounded-lg",src:e.url,alt:"anhsanpham"}),(0,T.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-600 text-center text-[12px] text-white px-[6px] rounded-full cursor-pointer",name:e.url,onClick:se,children:"x"})]},t)})),le=null===w||void 0===w?void 0:w.map((function(e,t){var n=e.id_ha,r=e.hinh_anh_sp;return(0,T.jsxs)("div",{className:"relative",children:[(0,T.jsx)("img",{className:"w-[100px] h-[100px] rounded-lg",src:r.slice(12,r.length),alt:"anhsanpham"}),(0,T.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-600 text-center text-[12px] text-white px-[6px] rounded-full cursor-pointer",onClick:function(){return oe(n)},children:"x"})]},t)})),de=function(e){e.preventDefault();var t=e.target.getAttribute("name"),n=e.target.value,r=(0,o.Z)({},E);r[t]=n,R(r)};return(0,T.jsxs)("div",{className:"relative",children:[(0,T.jsx)(G.OL,{to:"/manage/product/listproducts",children:(0,T.jsx)("button",{className:"ml-7 px-10 py-2 mb-5 text-white bg-slate-400 rounded shadow-lg",children:"Tr\u1edf v\u1ec1"})}),(0,T.jsxs)("form",{id:"addProduct",onSubmit:l((function(e){return ie(e)})),children:[(0,T.jsxs)("div",{className:"px-7",children:[(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{children:"T\xean s\u1ea3n ph\u1ea9m "}),(0,T.jsx)("input",(0,o.Z)({className:"px-2 py-1 w-full border border-slate-400 rounded-lg",type:"text",name:"tensanpham",defaultValue:null===(e=m[0])||void 0===e?void 0:e.ten_sp},n("tensanpham")))]}),(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{children:"Th\xf4ng tin s\u1ea3n ph\u1ea9m"})," ",(0,T.jsx)("br",{}),(0,T.jsx)("textarea",(0,o.Z)({className:"w-full p-2 h-[200px] border border-slate-400 rounded-lg",name:"thongtinsanpham",id:"",rows:"10",ref:n},n("thongtinsanpham")))]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("span",{children:"H\xecnh \u1ea3nh"}),(0,T.jsx)("div",{className:"flex gap-4",children:(0,T.jsxs)("div",{className:"flex gap-4",children:[(0,T.jsx)("input",{type:"file",id:"default-btn",className:"hidden",name:"file",onChange:function(e){re(e)},multiple:!0}),(0,T.jsx)("div",{className:"w-[100px] h-[100px] border border-slate-400 rounded-lg cursor-pointer",onClick:function(){document.getElementById("default-btn").click()},children:(0,T.jsx)("div",{className:"text-[25px] text-[#ccc] text-center leading-[90px] ",children:"+"})}),ce,le]})})]}),(0,T.jsx)("div",{className:"flex gap-5",children:(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{className:"block",children:"Lo\u1ea1i s\u1ea3n ph\u1ea9m"}),(0,T.jsx)("select",(0,o.Z)((0,o.Z)({className:"p-1 w-[200px] border border-slate-400 rounded-lg",name:"loaisanpham",id:"",ref:n},n("loaisanpham")),{},{children:te&&(null===te||void 0===te?void 0:te.map((function(e,t){var n=e.id_lsp,r=e.ten_lsp;return(0,T.jsx)("option",{value:n,children:r},t)})))}))]}),(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{className:"block",children:"Th\u01b0\u01a1ng hi\u1ec7u"}),(0,T.jsx)("select",(0,o.Z)((0,o.Z)({className:"p-1 w-[200px] border border-slate-400 rounded-lg",name:"thuonghieu",id:"",ref:n},n("thuonghieu")),{},{children:ee&&(null===ee||void 0===ee?void 0:ee.map((function(e,t){var n=e.id_th,r=e.ten_th;return(0,T.jsx)("option",{value:n,children:r},t)})))}))]}),(0,T.jsxs)("div",{className:"mt-5",children:[(0,T.jsx)("span",{className:"block",children:"Gi\xe1 b\xe1n"}),(0,T.jsx)("input",(0,o.Z)({className:"p-1 w-[200px] border border-slate-400 rounded-lg",type:"text",name:"giaban",ref:n},n("giaban")))]})]})})]}),(0,T.jsx)("div",{className:"mt-5",children:(0,T.jsx)("button",{className:"mt-1 ml-7 px-10 py-2 text-white bg-sky-600 rounded shadow-lg",children:"S\u1eeda"})})]}),(0,T.jsx)("form",{onSubmit:function(e){e.preventDefault();var t={id_sp:W.idsp,id_ms:E.mausac,id_kt:E.kichthuoc,so_luong_sp:E.soluong},n=[].concat((0,F.Z)(L),[t]);V(n)},children:(0,T.jsxs)("div",{className:"flex justify-between gap-6 w-[40%] mt-6 mb-10 px-7  absolute top-[63%] left-[18%]",children:[(0,T.jsx)("div",{className:"w-[30%]",children:(0,T.jsxs)("select",{name:"mausac",onChange:de,className:"h-8 px-2 w-full border border-slate-400 outline-none rounded-lg",children:[(0,T.jsx)("option",{value:"",children:"M\xe0u s\u1eafc"}),J&&(null===J||void 0===J?void 0:J.map((function(e,t){var n=e.id_ms,r=e.ten_ms;return(0,T.jsx)("option",{value:n,children:r},t)})))]})}),(0,T.jsx)("div",{className:"w-[30%]",children:(0,T.jsxs)("select",{name:"kichthuoc",onChange:de,className:"h-8 px-2 w-full border border-slate-400 outline-none rounded-lg",children:[(0,T.jsx)("option",{value:"",children:"K\xedch th\u01b0\u1edbc"}),Q&&(null===Q||void 0===Q?void 0:Q.map((function(e,t){var n=e.id_kt,r=e.ten_kt;return(0,T.jsx)("option",{value:n,children:r},t)})))]})}),(0,T.jsx)("div",{className:"w-[30%]",children:(0,T.jsx)("input",{name:"soluong",placeholder:"S\u1ed1 l\u01b0\u1ee3ng",onChange:de,className:"h-8 px-2 w-full border border-slate-400 outline-none rounded-lg",type:"number",min:0})}),(0,T.jsx)("button",{className:"px-4 bg-slate-400 rounded-lg",children:"Th\xeam"})]})}),(0,T.jsx)("div",{className:"absolute top-[72%] w-[35%] left-[20%]",children:(0,T.jsxs)("table",{children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"h-8 border border-slate-400 w-[20%]",children:"M\xe0u S\u1eafc"}),(0,T.jsx)("th",{className:"h-8 border border-slate-400 w-[20%]",children:"K\xedch Th\u01b0\u1edbc"}),(0,T.jsx)("th",{className:"h-8 border border-slate-400 w-[20%]",children:"S\u1ed1 L\u01b0\u1ee3ng"}),(0,T.jsx)("th",{className:"h-8 border border-slate-400 w-[20%]",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,T.jsx)("tbody",{children:null===L||void 0===L?void 0:L.map((function(e,t){var n=e.id_ms,r=e.id_kt,a=e.so_luong_sp;return(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"w-[20%] text-center border border-slate-400",children:J.filter((function(e){return e.id_ms===n}))[0].ten_ms}),(0,T.jsx)("td",{className:"w-[20%] text-center border border-slate-400",children:Q.filter((function(e){return e.id_kt===r}))[0].ten_kt}),(0,T.jsx)("td",{className:"w-[20%] text-center border border-slate-400",children:a}),(0,T.jsx)("td",{className:"w-[20%] text-center border border-slate-400 cursor-pointer hover:bg-zinc-500",onClick:function(){return e=t,void V(L.filter((function(t,n){return n!==e})));var e},children:"x"})]},t)}))})]})})]})},U=n(69829),X=n(91239),Y=n(89200),q=n(76510),O=n(59176);var W=function(){var e=(0,z.I0)();return(0,i.useEffect)((function(){(0,a.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=U.SI,t.t1=e,t.next=5,(0,X.$)();case 5:return t.t2=t.sent,t.t3=(0,t.t1)(t.t2),(0,t.t0)(t.t3),t.t4=U.SI,t.t5=e,t.next=12,(0,Y.U)();case 12:return t.t6=t.sent,t.t7=(0,t.t5)(t.t6),(0,t.t4)(t.t7),t.t8=U.SI,t.t9=e,t.next=19,(0,q.d)();case 19:return t.t10=t.sent,t.t11=(0,t.t9)(t.t10),(0,t.t8)(t.t11),t.t12=U.SI,t.t13=e,t.next=26,(0,O.n)();case 26:t.t14=t.sent,t.t15=(0,t.t13)(t.t14),(0,t.t12)(t.t15),t.next=34;break;case 31:t.prev=31,t.t16=t.catch(0),console.log(t.t16);case 34:case"end":return t.stop()}}),t,null,[[0,31]])})))()}),[]),(0,T.jsx)("div",{children:(0,T.jsxs)(s.Z5,{children:[(0,T.jsx)(s.AW,{path:"/add",element:(0,T.jsx)(E,{})}),(0,T.jsx)(s.AW,{path:"/listproducts",element:(0,T.jsx)(V,{})}),(0,T.jsx)(s.AW,{path:"/edit/:idsp",element:(0,T.jsx)(R,{})})]})})}},38033:function(e,t,n){var r=n(65608),a={createdetailProductAPI:function(e){return r.Z.post("/api/detail_product/add",e)},updateNumberProduct:function(e){return r.Z.put("/api/detail_product/update_number_product",e)},getAllNumber:function(){return r.Z.get("/api/detail_product/list")},getList:function(e){var t="/api/detail_product/list/".concat(e);return r.Z.get(t)},getListColor:function(e,t){var n="/api/detail_product/size/".concat(e,"/").concat(t);return r.Z.get(n)},getProductByNow:function(e){return r.Z.get("/api/detail_product/buy_now",{params:e})},getNumberProduct:function(e,t,n){var a="/api/detail_product/number_product/".concat(e,"/").concat(n,"/").concat(t);return r.Z.get(a)},removeProduct:function(e){return r.Z.put("/api/detail_product/remove_product",e)},addNumberProduct:function(e){return r.Z.put("/api/detail_product/add_product",e)},getNumberOneProduct:function(e){return r.Z.get("/api/detail_product/number_product",{params:e})},removeUpdate:function(e){var t="/api/detail_product/removeUpdate/".concat(e);return r.Z.put(t)},updateDetailproduct:function(e){return r.Z.post("/api/detail_product/update",e)}};t.Z=a},63048:function(e,t,n){var r=n(65608),a={createImage:function(e){console.log(e);return r.Z.post("/api/manage/photos/upload",e)},getImage:function(e){var t="/api/manage/photos/id=".concat(e);return r.Z.get(t)},deleteImage:function(e){var t="/api/manage/photos/delete=".concat(e);return r.Z.delete(t)}};t.Z=a},83798:function(e,t,n){var r=n(65608),a={createImportInvoiceAPI:function(e){return r.Z.post("/api/manage/importInvoice/add",e)},getListImportInvoiceAPI:function(){return r.Z.get("/api/manage/importInvoice/list")},getId:function(){return r.Z.get("/api/manage/importInvoice/id")},deleteImportInvoice:function(e){var t="/api/manage/importInvoice/delete/id=".concat(e);return r.Z.delete(t)},sumPriceInvoice:function(e){var t="/api/manage/importInvoice/sum_price/idhdn=".concat(e);return r.Z.get(t)},sumPriceInvoices:function(){return r.Z.get("/api/manage/importInvoice/sum_price")}};t.Z=a}}]);
//# sourceMappingURL=341.1d19ac19.chunk.js.map